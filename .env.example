# =============================================================================
# CONFIGURACIÓN DE NOTIFICACIONES POR EMAIL
# =============================================================================
# Copia este archivo a .env y configura tus credenciales

# -----------------------------------------------------------------------------
# SMTP Configuration (Gmail example)
# -----------------------------------------------------------------------------
# Para Gmail: https://support.google.com/mail/answer/7126229
# Requiere contraseña de aplicación (no tu contraseña normal)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=tu-email@gmail.com
SMTP_PASSWORD=tu-contraseña-de-aplicacion-aqui
SMTP_FROM_EMAIL=tu-email@gmail.com
SMTP_FROM_NAME=Sistema CFDI
SMTP_USE_TLS=true

# -----------------------------------------------------------------------------
# Email Notifications
# -----------------------------------------------------------------------------
# Habilitar/deshabilitar notificaciones por email
EMAIL_NOTIFICATIONS_ENABLED=true

# Destinatarios de notificaciones (separados por comas)
# Ejemplo: contador@empresa.com,ceo@empresa.com,admin@empresa.com
NOTIFICATION_EMAILS=tu-email@empresa.com

# Frontend URL (para links en emails)
FRONTEND_URL=http://localhost:3001
FROM_EMAIL=tu-email@gmail.com
FROM_NAME=ContaFlow

# -----------------------------------------------------------------------------
# SMTP Alternativo: SendGrid (Recomendado para producción)
# -----------------------------------------------------------------------------
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASSWORD=tu-api-key-de-sendgrid
# SMTP_USE_TLS=true

# -----------------------------------------------------------------------------
# SMTP Alternativo: Outlook / Office 365
# -----------------------------------------------------------------------------
# SMTP_HOST=smtp.office365.com
# SMTP_PORT=587
# SMTP_USER=tu-email@outlook.com
# SMTP_PASSWORD=tu-contraseña
# SMTP_USE_TLS=true

# -----------------------------------------------------------------------------
# SMTP Alternativo: Amazon SES
# -----------------------------------------------------------------------------
# SMTP_HOST=email-smtp.us-east-1.amazonaws.com
# SMTP_PORT=587
# SMTP_USER=tu-smtp-username
# SMTP_PASSWORD=tu-smtp-password
# SMTP_USE_TLS=true

# =============================================================================
# AI CONFIGURATION (Gemini)
# =============================================================================
# Para obtener tu API key: https://ai.google.dev/
# Plan gratuito: 1,500 requests/día

# Gemini API Key (REQUERIDO para AI-driven parsing)
GEMINI_API_KEY=tu-gemini-api-key-aqui

# Habilitar parser AI-driven (true/false)
# Si está en true, usa Gemini Vision OCR + LLM para extraer transacciones
# Si está en false, usa el parser tradicional basado en regex
AI_PARSER_ENABLED=true

# Habilitar fallback a parser tradicional si AI falla
# Si está en true y Gemini falla, intenta con parser tradicional
AI_FALLBACK_ENABLED=true

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5433
POSTGRES_DB=mcp_system
POSTGRES_USER=mcp_user
POSTGRES_PASSWORD=changeme

# =============================================================================
# INSTRUCCIONES DE CONFIGURACIÓN
# =============================================================================
#
# 1. Copia este archivo:
#    cp .env.example .env
#
# 2. Edita .env con tus credenciales reales:
#    nano .env  # o usa tu editor preferido
#
# 3. Si usas Gmail, genera una contraseña de aplicación:
#    - Ve a https://myaccount.google.com/
#    - Seguridad → Verificación en dos pasos (activar)
#    - Seguridad → Contraseñas de aplicaciones
#    - Crea una para "Sistema CFDI"
#    - Copia la contraseña a SMTP_PASSWORD
#
# 4. Obtén tu Gemini API Key (NUEVO):
#    - Ve a https://ai.google.dev/
#    - Haz clic en "Get API Key"
#    - Copia la key a GEMINI_API_KEY
#
# 5. Prueba la configuración:
#    python3 scripts/utilities/verificar_todas_companias.py --dry-run --notify
#
# 6. Instala dependencias:
#    pip3 install python-dotenv google-generativeai
#
# =============================================================================

# =============================================================================
# CONFIGURACIÓN DE WHATSAPP WEBHOOK
# =============================================================================
# Para recibir mensajes de WhatsApp vía webhook

# Token de verificación (crear uno único y secreto)
# Este mismo token debe configurarse en Meta Developer Console
WHATSAPP_VERIFY_TOKEN=tu_token_secreto_aqui_123456

# IDs por defecto para mensajes de WhatsApp
WHATSAPP_DEFAULT_TENANT_ID=1
WHATSAPP_DEFAULT_COMPANY_ID=default
WHATSAPP_DEFAULT_USER_ID=1


# =============================================================================
# VECTOR DATABASE (PG VECTOR)
# =============================================================================
# Habilitar búsqueda por embeddings en PostgreSQL para clasificación SAT
# Si está en true, usa pgvector para búsqueda semántica (MÁS PRECISO)
# Si está en false, usa catálogo fallback de 6 códigos (SOLO PARA DESARROLLO)
USE_PG_VECTOR=true
